!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("echarts/lib/echarts"),require("lodash/debounce"),require("lodash/isPlainObject")):"function"==typeof define&&define.amd?define(["echarts/lib/echarts","lodash/debounce","lodash/isPlainObject"],t):(e=e||self).VueNECharts=t(e.echarts,e.debounce,e.isPlainObject)}(this,(function(e,t,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;let r=null;let s=null;function n(e,t={}){let i=document.createElement(e);return Object.keys(t).forEach(e=>{i[e]=t[e]}),i}function o(e,t,i){return(window.getComputedStyle(e,i||null)||{display:"none"})[t]}function a(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===o(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let l=0,d=null;function c(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=h.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:i}=e,r=new ResizeObserver(()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==i))&&u(e)}),{detached:s,rendered:n}=a(e);e.__resize_observer_triggered__=!1===s&&!1===n,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){u(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(l||(d=function(e){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}('.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}')),function(e){let t=o(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let i=n("div",{className:"resize-triggers"}),r=n("div",{className:"resize-expand-trigger"}),s=n("div"),a=n("div",{className:"resize-contract-trigger"});r.appendChild(s),i.appendChild(r),i.appendChild(a),e.appendChild(i),e.__resize_triggers__={triggers:i,expand:r,expandChild:s,contract:a},f(e),e.addEventListener("scroll",_,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=a(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}e.__resize_listeners__.push(t),l++}function h(){let{rendered:e,detached:t}=a(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(f(this),this.addEventListener("scroll",_,!0)),this.__resize_rendered__=e,u(this))}function _(){var e,t;f(this),this.__resize_raf__&&(e=this.__resize_raf__,s||(s=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),s(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:i}=e.__resize_last__,{offsetWidth:r,offsetHeight:s}=e;return r!==t||s!==i?{width:r,height:s}:null}(this);e&&(this.__resize_last__=e,u(this))},r||(r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),r(t))}function u(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach(t=>{t.call(e)})}function f(e){let{expand:t,expandChild:i,contract:r}=e.__resize_triggers__,{scrollWidth:s,scrollHeight:n}=r,{offsetWidth:o,offsetHeight:a,scrollWidth:l,scrollHeight:d}=t;r.scrollLeft=s,r.scrollTop=n,i.style.width=o+1+"px",i.style.height=a+1+"px",t.scrollLeft=l,t.scrollTop=d}const p=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];var g={color:p,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},legend:{textStyle:{color:"#666"}},toolbox:{iconStyle:{normal:{borderColor:p[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#ccc"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#ccc",weight:2}},axisLabel:{color:"#666"},axisTick:{show:!1},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#eee"}},axisLabel:{color:"#666"},axisTick:{show:!1},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"],type:"dotted"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},map:{label:{normal:{textStyle:{color:"#d87a80"}}},itemStyle:{normal:{borderColor:"#eee",areaColor:"#ddd"},emphasis:{areaColor:"#fe994e"}}},graph:{color:p},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}};function m(e,t){return i(t.title)?t.title:{text:t.title||"",subtext:t.subtitle||"",x:50}}function b(e,t){t.legend=i(t.legend)?t.legend:{};const r={data:[],selected:{},show:!0,orient:"horizontal",...t.legend};return!Array.isArray(e)||r.data&&0!==r.data.length||e.forEach((e,i)=>{r.data.push(e.name),t.legendLightCount&&i>=t.legendLightCount?r.selected[e.name]=!1:r.selected[e.name]=!0}),r.type=t.legendScroll||"plain",r}function y(e,t){return t.toolbox=i(t.toolbox)?t.toolbox:{},{show:!1,...t.toolbox}}function z(e,t){t.xAxis=i(t.xAxis)?t.xAxis:{};const r={show:!0,axisLine:{show:!0},type:"category",data:[],boundaryGap:"bar"===t.type,...t.xAxis};if((!r.data||0===r.data.length)&&e&&e[0]&&e[0].dataPoints){const t=[];e[0].dataPoints.forEach(e=>{t.push(e.x)}),r.data=t}return r}function x(e,t){return t.yAxis=i(t.xAxis)?t.xAxis:{},{show:!0,type:"value",scale:!1,axisLine:{show:!1},axisLabel:{formatter:function(e){return t=e,i||(i=function(e){return Math.round(100*e)/100}),(t=Math.abs(t))>=1e12?i(t/1e12)+"T":t>=1e9?i(t/1e9)+"B":t>=1e6?i(t/1e6)+"M":t>=1e3?i(t/1e3)+"K":t<1&&t>0?i(t):0===t?"":i(t);var t,i}},...t.yAxis}}function v(e,t){t.tooltip=i(t.tooltip)?t.tooltip:{};const r={confine:!0,...t.tooltip};if(!r.trigger)switch(t.type){case"line":r.trigger="axis";break;case"pie":case"bar":r.trigger="item"}return r.formatter||"pie"!==t.type||(r.formatter="{a} <br/>{b}: {c} ({d}%)"),r}function w(e,t){const i=[];return Array.isArray(e)?(e.forEach(e=>{const r=[];t.xAxis&&t.xAxis.data?t.xAxis.data.forEach(t=>{let i=null;for(let r=0,s=e.dataPoints.length;r<s;r++)if(e.dataPoints[r].x===t){i=e.dataPoints[r].y;break}r.push(i)}):e.dataPoints.forEach(e=>{r.push(e.y)});const s={type:t.type||"line",name:e.name,data:r};i.push(s)}),i):i}e.registerTheme("shine",g);const S=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];return function(e,t,i,r,s,n,o,a,l,d){"boolean"!=typeof o&&(l=a,a=o,o=!1);const c="function"==typeof i?i.options:i;let h;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),r&&(c._scopeId=r),n?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=h):t&&(h=o?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),h)if(c.functional){const e=c.render;c.render=function(t,i){return h.call(i),e(t,i)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,h):[h]}return i}({render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"chart",staticClass:"echarts"})},staticRenderFns:[]},void 0,{name:"NoxEcharts",props:{config:Object,data:Array,initOptions:Object,theme:{type:[String,Object],default:"shine"},autoresize:{type:Boolean,default:!0},manualUpdate:{type:Boolean,default:!1}},data:()=>({lastArea:0}),computed:{options(){const e=this.config;return{title:m(this.data,e),tooltip:v(this.data,e),legend:b(this.data,e),toolbox:y(this.data,e),xAxis:z(this.data,e),yAxis:x(this.data,e),series:w(this.data,e)}}},created(){this.initOptionsWatcher()},mounted(){this.options&&this.init()},destroyed(){this.chart&&this.destroy()},methods:{setSize(){const e=this.$el;if(!e)return;const t=e.parentElement,i=t.clientWidth,r=t.clientHeight,s=this.config.width||i||320,n=this.config.height||r||240;e.style.width=s+"px",e.style.height=n+"px"},mergeOptions(e,t,i){this.manualUpdate&&(this.manualOptions=e),this.chart?(this.chart.clear(),this.chart.setOption(e,t,i)):this.init()},getArea(){return this.$el.offsetWidth*this.$el.offsetHeight},init(){if(this.chart)return;this.setSize();const i=e.init(this.$el,this.theme,this.initOptions);i.setOption(this.manualOptions||this.options||{},!0),S.forEach(e=>{i.on(e,t=>{this.$emit(e,t)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=t(()=>{0===this.lastArea?(this.mergeOptions({},!0),this.chart.resize(),this.mergeOptions(this.options||this.manualOptions||{},!0)):(this.setSize(),this.chart.resize()),this.lastArea=this.getArea()},100,{leading:!0}),c(this.$el.parentElement,this.__resizeHandler)),this.chart=i},initOptionsWatcher(){this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",(e,t)=>{!this.chart&&e?this.init():(this.chart.clear(),this.chart.setOption(e))},{deep:!0}))},destroy(){this.autoresize&&function(e,t){let i=e.__resize_listeners__;if(i){if(t&&i.splice(i.indexOf(t),1),!i.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",_),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--l&&d&&d.parentNode.removeChild(d)}}(this.$el.parentElement,this.__resizeHandler),this.chart.dispose(),this.chart=null},refresh(){this.chart&&(this.destroy(),this.init())}}},void 0,!1,void 0,!1,void 0,void 0,void 0)}));
